{
  "manifest": {
    "name": "@rollup/plugin-wasm",
    "version": "6.2.1",
    "publishConfig": {
      "access": "public"
    },
    "description": "Import WebAssembly code with Rollup",
    "license": "MIT",
    "repository": {
      "url": "https://github.com/rollup/plugins.git",
      "directory": "packages/wasm"
    },
    "author": {
      "name": "Jamen Marz",
      "email": "jamenmarz+gh@gmail.com"
    },
    "homepage": "https://github.com/rollup/plugins/tree/master/packages/wasm/#readme",
    "bugs": {
      "url": "https://github.com/rollup/plugins/issues"
    },
    "main": "./dist/cjs/index.js",
    "module": "./dist/es/index.js",
    "exports": {
      "types": "./types/index.d.ts",
      "import": "./dist/es/index.js",
      "default": "./dist/cjs/index.js"
    },
    "engines": {
      "node": ">=14.0.0"
    },
    "scripts": {
      "build": "rollup -c",
      "ci:coverage": "nyc pnpm test && nyc report --reporter=text-lcov > coverage.lcov",
      "ci:lint": "pnpm build && pnpm lint",
      "ci:lint:commits": "commitlint --from=${CIRCLE_BRANCH} --to=${CIRCLE_SHA1}",
      "ci:test": "pnpm test -- --verbose",
      "prebuild": "del-cli dist",
      "prepare": "if [ ! -d 'dist' ]; then pnpm build; fi",
      "prerelease": "pnpm build",
      "pretest": "pnpm build",
      "release": "pnpm --workspace-root plugin:release --pkg $npm_package_name",
      "test": "ava",
      "test:ts": "tsc --noEmit"
    },
    "files": [
      "dist",
      "!dist/**/*.map",
      "types",
      "README.md",
      "LICENSE"
    ],
    "keywords": [
      "rollup",
      "plugin",
      "webassembly",
      "import",
      "wasm",
      "wast",
      "wat",
      "emscripten"
    ],
    "peerDependencies": {
      "rollup": "^1.20.0||^2.0.0||^3.0.0"
    },
    "peerDependenciesMeta": {
      "rollup": {
        "optional": true
      }
    },
    "dependencies": {
      "@rollup/pluginutils": "^5.0.2"
    },
    "devDependencies": {
      "@rollup/plugin-typescript": "^9.0.1",
      "del-cli": "^5.0.0",
      "rollup": "^3.2.3",
      "source-map": "^0.7.4",
      "typescript": "^4.8.3"
    },
    "types": "./types/index.d.ts",
    "ava": {
      "workerThreads": false,
      "files": [
        "!**/fixtures/**",
        "!**/helpers/**",
        "!**/recipes/**",
        "!**/types.ts"
      ]
    },
    "contributors": [
      {
        "name": "Jamen Marz",
        "email": "jamenmarz+gh@gmail.com"
      },
      {
        "name": "Colin Eberhardt",
        "email": "colin.eberhardt@gmail.com"
      }
    ],
    "_registry": "npm",
    "_loc": "/home/ubuntu/.cache/yarn/v6/npm-@rollup-plugin-wasm-6.2.1-877015cc0099df7b9e67af47258603516b66a04d-integrity/node_modules/@rollup/plugin-wasm/package.json",
    "readmeFilename": "README.md",
    "readme": "[npm]: https://img.shields.io/npm/v/@rollup/plugin-wasm\n[npm-url]: https://www.npmjs.com/package/@rollup/plugin-wasm\n[size]: https://packagephobia.now.sh/badge?p=@rollup/plugin-wasm\n[size-url]: https://packagephobia.now.sh/result?p=@rollup/plugin-wasm\n\n[![npm][npm]][npm-url]\n[![size][size]][size-url]\n[![libera manifesto](https://img.shields.io/badge/libera-manifesto-lightgrey.svg)](https://liberamanifesto.com)\n\n# @rollup/plugin-wasm\n\nüç£ A Rollup which allows importing and bundling [WebAssembly modules](http://webassembly.org).\n\nWebAssembly Modules are imported asynchronous as base64 strings. Small modules [can be imported synchronously](#synchronous-modules).\n\n## Requirements\n\nThis plugin requires an [LTS](https://github.com/nodejs/Release) Node version (v14.0.0+) and Rollup v1.20.0+.\n\n## Install\n\nUsing npm:\n\n```console\nnpm install @rollup/plugin-wasm --save-dev\n```\n\n## Usage\n\nCreate a `rollup.config.js` [configuration file](https://www.rollupjs.org/guide/en/#configuration-files) and import the plugin:\n\n```js\nimport { wasm } from '@rollup/plugin-wasm';\n\nexport default {\n  input: 'src/index.js',\n  output: {\n    dir: 'output',\n    format: 'cjs'\n  },\n  plugins: [wasm()]\n};\n```\n\nThen call `rollup` either via the [CLI](https://www.rollupjs.org/guide/en/#command-line-reference) or the [API](https://www.rollupjs.org/guide/en/#javascript-api).\n\n## Options\n\n### `exclude`\n\nType: `String` | `Array[...String]`<br>\nDefault: `null`\n\nA [picomatch pattern](https://github.com/micromatch/picomatch), or array of patterns, which specifies the files in the build the plugin should _ignore_. By default no files are ignored.\n\n### `include`\n\nType: `String` | `Array[...String]`<br>\nDefault: `null`\n\nA [picomatch pattern](https://github.com/micromatch/picomatch), or array of patterns, which specifies the files in the build the plugin should operate on. By default all wasm files are targeted.\n\n### `sync`\n\nType: `Array[...String]`<br>\nDefault: `null`\n\nSpecifies an array of strings that each represent a WebAssembly file to load synchronously. See [Synchronous Modules](#synchronous-modules) for a functional example.\n\n### `maxFileSize`\n\nType: `Number`<br>\nDefault: `14336` (14kb)\n\nThe maximum file size for inline files. If a file exceeds this limit, it will be copied to the destination folder and loaded from a separate file at runtime. If `maxFileSize` is set to `0` all files will be copied.\n\nFiles specified in `sync` to load synchronously are always inlined, regardless of size.\n\n### `fileName`\n\nType: `String`<br>\nDefault: `'[hash][extname]'`\n\nThis option can be used to rename the emitted Wasm files. It accepts the following string replacements:\n\n- `[hash]` - The hash value of the file's contents\n- `[name]` - The name of the imported file (without its file extension)\n- `[extname]` - The extension of the imported file (including the leading `.`)\n\n### `publicPath`\n\nType: `String`<br>\nDefault: (empty string)\n\nA string which will be added in front of filenames when they are not inlined but are copied.\n\n### `targetEnv`\n\nType: `\"auto\" | \"browser\" | \"node\"`<br>\nDefault: `\"auto\"`\n\nConfigures what code is emitted to instantiate the Wasm (both inline and separate):\n\n- `\"auto\"` will determine the environment at runtime and invoke the correct methods accordingly\n- `\"auto-inline\"` always inlines the Wasm and will decode it according to the environment\n- `\"browser\"` omits emitting code that requires node.js builtin modules that may play havoc on downstream bundlers\n- `\"node\"` omits emitting code that requires `fetch`\n\n## Usage\n\nThis plugin looks for `import` statements where the file specifier ends with `.wasm`, such as:\n\n```js\nimport wasm from './example.wasm';\n```\n\nThe WebAssembly is inlined as a base64 encoded string. At runtime the string is decoded and a module is returned.\n\n_Note: The base64 string that represents the WebAssembly within the bundle will be ~33% larger than the original file._\n\nWhen bundled, `wasm` is a function you can use to instantiate the functionality inside of the WebAssembly module. This function returns a promise, so you can instantiate the module like this:\n\n```js\nimport wasm from './example.wasm';\n\nwasm().then(({ instance }) => {\n  // use instance\n});\n\n// or use top-level await\nconst { instance } = await wasm();\n```\n\nThe promise returns an object with an `instance` property that is a [`WebAssembly.Module`](https://developer.mozilla.org/en-US/docs/WebAssembly/JavaScript_interface/Module) object that you can use to interact with the WebAssembly module.\n\nFor example, given the following simple C file:\n\n```c\nint main() {\n  return 42;\n}\n```\n\nCompile the file using `emscripten`, or the online [WasmFiddle](https://wasdk.github.io/WasmFiddle/) tool. Then import and instantiate the resulting file:\n\n```js\nimport sample from './sample.wasm';\n\nsample().then(({ instance }) => {\n  console.log(instance.exports.main());\n});\n```\n\n### Passing Imports and Memory\n\nIf you'd like to pass any imports or memory into your WebAssembly module, you can do so by passing those as arguments to the WebAssembly loader function, like this:\n\n```js\nimport sample from './sample.wasm';\n\nconst memory = new WebAssembly.Memory({ initial: 10, maximum: 100 });\n\nconst options = {\n  js: {\n    mem: memory\n  },\n  imports: {\n    log: (arg) => console.log(arg)\n  }\n};\n\nsample(options).then(({ instance }) => {\n  console.log(instance.exports.main());\n});\n```\n\nBecause this example passes in `imports`, the `instance` becomes an instance of [`WebAssembly.Instance`](https://developer.mozilla.org/en-US/docs/WebAssembly/JavaScript_interface/Instance) and gives the WebAssembly code access to the imports and memory from JavaScript.\n\n\\_\\_Note: Just passing in memory will result in a `WebAssembly.Module` as `instance`; it's only `imports` that triggers the creation of `WebAssembly.Instance`.\n\n### Using with wasm-bindgen and wasm-pack\n\nIf you are writing Rust code and using [`wasm-bindgen`](https://github.com/rustwasm/wasm-bindgen) or [`wasm-pack`](https://github.com/rustwasm/wasm-pack), you'll need to use a different process for instantiating your WebAssembly modules. Because WebAssembly files generated by these tools require specific imports, you cannot provide these yourself.\n\nThe best setting to use with `wasm-bindgen` or `wasm-pack` is `--target web`. This will generate your WebAssembly files (such as `sample_bg.wasm`) with a JavaScript wrapper (such as `sample.js`). The JavaScript wrapper contains all of the instantiation code you'll need.\n\nYou'll need to import both the JavaScript file and the WebAssembly file into your project. Then, run the WebAssembly loading function and pass that into the `init()` function from the JavaScript file. Here's an example:\n\n```js\nimport init, { main } from '../build/sample.js';\nimport sample from '../build/sample_bg.wasm';\n\nsample()\n  .then({ instance } => init(instance))\n  .then(() => main());\n\n// or using top-level await\n\nawait init(await sample());\nmain();\n```\n\nUnlike with the `emscripten` example, you'll need to import the methods you want to use directly from the JavaScript file rather than accessing them on the `WebAssembly.Instance`.\n\n### Synchronous Modules\n\nJavaScript runtimes allow small modules (< 4KB) to be compiled synchronously. If you'd like to specify some files to be compiled synchronously, you can do so in your `rollup.config.js` file.\n\n```js\nimport { wasm } from '@rollup/plugin-wasm';\n\nexport default {\n  input: 'src/index.js',\n  output: {\n    dir: 'output',\n    format: 'cjs'\n  },\n  plugins: [\n    wasm({\n      sync: ['web/sample.wasm', 'web/foobar.wasm']\n    });\n  ]\n};\n```\n\nSynchronous modules return a synchronous loader function that returns either a `WebAssembly.Module` or `WebAssembly.Instance` directly (not a promise). So you can use the module directly, like this:\n\n```js\nimport sample from './sample.wasm';\n\nconst instance = sample({ ...imports });\n\nconsole.log(instance.exports.main());\n```\n\n## Meta\n\n[CONTRIBUTING](/.github/CONTRIBUTING.md)\n\n[LICENSE (MIT)](/LICENSE)\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/@rollup/plugin-wasm/-/plugin-wasm-6.2.1.tgz#877015cc0099df7b9e67af47258603516b66a04d",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/@rollup/plugin-wasm/-/plugin-wasm-6.2.1.tgz",
    "hash": "877015cc0099df7b9e67af47258603516b66a04d",
    "integrity": "sha512-WDMmM+4121/DId2uLdhvhC08SqaZVoYfLr1IeVj28jJn9GqPoJCdVzUaaevhIU6nJiZ+EYPZT0xOxsNQUFrQsQ==",
    "registry": "npm",
    "packageName": "@rollup/plugin-wasm",
    "cacheIntegrity": "sha512-WDMmM+4121/DId2uLdhvhC08SqaZVoYfLr1IeVj28jJn9GqPoJCdVzUaaevhIU6nJiZ+EYPZT0xOxsNQUFrQsQ== sha1-h3AVzACZ33ueZ69HJYYDUWtmoE0="
  },
  "registry": "npm",
  "hash": "877015cc0099df7b9e67af47258603516b66a04d"
}