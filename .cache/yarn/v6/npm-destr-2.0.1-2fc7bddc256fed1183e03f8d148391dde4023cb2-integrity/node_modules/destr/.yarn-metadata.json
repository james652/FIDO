{
  "manifest": {
    "name": "destr",
    "version": "2.0.1",
    "description": "A faster, secure and convenient alternative for JSON.parse",
    "repository": {
      "type": "git",
      "url": "https://github.com/unjs/destr.git"
    },
    "license": "MIT",
    "type": "module",
    "exports": {
      ".": {
        "types": "./dist/index.d.ts",
        "import": "./dist/index.mjs",
        "require": "./lib/index.cjs"
      }
    },
    "main": "./lib/index.cjs",
    "module": "./dist/index.mjs",
    "types": "./dist/index.d.ts",
    "files": [
      "dist",
      "lib"
    ],
    "scripts": {
      "bench": "pnpm build && node ./bench.mjs",
      "build": "unbuild",
      "dev": "vitest dev",
      "lint": "eslint --ext .ts . && prettier -c src test",
      "lint:fix": "eslint --ext .ts . --fix && prettier -w src test",
      "release": "pnpm test && pnpm build && changelogen --release --push && npm publish",
      "test": "pnpm lint && vitest run --coverage"
    },
    "devDependencies": {
      "@hapi/bourne": "^3.0.0",
      "@vitest/coverage-v8": "^0.34.1",
      "benchmark": "^2.1.4",
      "changelogen": "^0.5.4",
      "eslint": "^8.46.0",
      "eslint-config-unjs": "^0.2.1",
      "prettier": "^3.0.0",
      "secure-json-parse": "^2.7.0",
      "typescript": "^5.1.6",
      "unbuild": "^1.2.1",
      "vitest": "^0.34.1"
    },
    "packageManager": "pnpm@8.6.9",
    "_registry": "npm",
    "_loc": "/home/ubuntu/.cache/yarn/v6/npm-destr-2.0.1-2fc7bddc256fed1183e03f8d148391dde4023cb2-integrity/node_modules/destr/package.json",
    "readmeFilename": "README.md",
    "readme": "# destr\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![License][license-src]][license-href]\n\nA faster, secure and convenient alternative for [`JSON.parse`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse).\n\n## Usage\n\n### Node.js\n\nInstall dependency:\n\n```bash\n# npm\nnpm i destr\n\n# yarn\nyarn add destr\n\n# pnpm\npnpm i destr\n```\n\nImport into your Node.js project:\n\n```js\n// ESM\nimport { destr, safeDestr } from \"destr\";\n\n// CommonJS\nconst { destr, safeDestr } = require(\"destr\");\n```\n\n### Deno\n\n```js\nimport { destr, safeDestr } from \"https://deno.land/x/destr/src/index.ts\";\n\nconsole.log(destr('{ \"deno\": \"yay\" }'));\n```\n\n## Why?\n\n### âœ… Type Safe\n\n```ts\nconst obj = JSON.parse(\"{}\"); // obj type is any\n\nconst obj = destr(\"{}\"); // obj type is unknown by default\n\nconst obj = destr<MyInterface>(\"{}\"); // obj is well-typed\n```\n\n### âœ… Fast fallback to input if is not string\n\n> ðŸš€ Up to 500 faster than `JSON.parse`!\n\n```js\n// Uncaught SyntaxError: Unexpected token u in JSON at position 0\nJSON.parse();\n\n// undefined\ndestr();\n```\n\n### âœ… Fast lookup for known string values\n\n> ðŸš€ Up to 900 times faster than `JSON.parse`!\n\n```js\n// Uncaught SyntaxError: Unexpected token T in JSON at position 0\nJSON.parse(\"TRUE\");\n\n// true\ndestr(\"TRUE\");\n```\n\n### âœ… Fallback to original value if parse fails (empty or any plain string)\n\n> ðŸš€ Up to 900 times faster than `JSON.parse`!\n\n```js\n// Uncaught SyntaxError: Unexpected token s in JSON at position 0\nJSON.parse(\"salam\");\n\n// \"salam\"\ndestr(\"salam\");\n```\n\n**Note:** This fails in safe/strict mode with `safeDestr`.\n\n### âœ… Avoid prototype pollution\n\n```js\nconst input = '{ \"user\": { \"__proto__\": { \"isAdmin\": true } } }';\n\n// { user: { __proto__: { isAdmin: true } } }\nJSON.parse(input);\n\n// { user: {} }\ndestr(input);\n```\n\n### âœ… Strict Mode\n\nWhen using `safeDestr` it will throw an error if the input is not a valid JSON string or parsing fails. (non string values and built-ins will be still returned as-is)\n\n```js\n// Returns \"[foo\"\ndestr(\"[foo\");\n\n// Throws an error\nsafeDestr(\"[foo\");\n```\n\n## Benchmarks\n\nLocally try with `pnpm benchmark`. Below are esults on Node.js **v18.16.0** with MBA M2.\n\n**Note** `destr` is sometimes little bit slower than `JSON.parse` when parsing a valid JSON string mainly because of transform to avoid [prototype pollution](https://learn.snyk.io/lessons/prototype-pollution/javascript/) which can lead to serious security issues if not being sanitized. In the other words, `destr` is better when input is not always a json string or from untrusted source like request body.\n\n```\n=== Non-string fallback ==\nJSON.parse x 9,498,532 ops/sec Â±0.57% (96 runs sampled)\ndestr x 153,323,211 ops/sec Â±0.13% (99 runs sampled)\nsafeDestr x 64,237,062 ops/sec Â±0.22% (96 runs sampled)\nsjson:\n@hapi/bourne x 9,190,459 ops/sec Â±0.50% (93 runs sampled)\nFastest is destr\n\n=== Known values ==\nJSON.parse x 14,260,909 ops/sec Â±0.54% (95 runs sampled)\ndestr x 72,916,945 ops/sec Â±0.15% (98 runs sampled)\nsafeDestr x 36,544,906 ops/sec Â±0.31% (98 runs sampled)\nsjson x 11,157,730 ops/sec Â±0.53% (96 runs sampled)\n@hapi/bourne x 13,241,853 ops/sec Â±0.73% (93 runs sampled)\nFastest is destr\n\n=== plain string ==\nJSON.parse (try-catch) x 10,603,912 ops/sec Â±0.75% (91 runs sampled)\ndestr x 82,123,481 ops/sec Â±2.37% (99 runs sampled)\nsafeDestr x 40,737,935 ops/sec Â±0.97% (96 runs sampled)\nsjson (try-catch) x 9,194,305 ops/sec Â±1.96% (94 runs sampled)\n@hapi/bourne x 10,816,232 ops/sec Â±1.59% (90 runs sampled)\nFastest is destr\n\n=== package.json ==\nJSON.parse x 403,428 ops/sec Â±0.31% (101 runs sampled)\ndestr x 338,668 ops/sec Â±0.27% (97 runs sampled)\nsafeDestr x 335,756 ops/sec Â±0.29% (98 runs sampled)\nsjson x 355,493 ops/sec Â±0.15% (101 runs sampled)\n@hapi/bourne x 384,948 ops/sec Â±0.24% (98 runs sampled)\nFastest is JSON.parse\n\n=== broken object ==\nJSON.parse (try-catch) x 406,262 ops/sec Â±0.18% (100 runs sampled)\ndestr x 337,602 ops/sec Â±0.37% (99 runs sampled)\nsafeDestr x 320,071 ops/sec Â±0.35% (97 runs sampled)\nsjson (try-catch) x 326,689 ops/sec Â±0.41% (97 runs sampled)\n@hapi/bourne x 313,024 ops/sec Â±0.91% (94 runs sampled)\nFastest is JSON.parse (try-catch)\n```\n\n## License\n\nMIT. Made with ðŸ’–\n\n<!-- Badges -->\n\n[npm-version-src]: https://img.shields.io/npm/v/destr?style=flat&colorA=18181B&colorB=F0DB4F\n[npm-version-href]: https://npmjs.com/package/destr\n[npm-downloads-src]: https://img.shields.io/npm/dm/destr?style=flat&colorA=18181B&colorB=F0DB4F\n[npm-downloads-href]: https://npmjs.com/package/destr\n[bundle-src]: https://img.shields.io/bundlephobia/minzip/destr?style=flat&colorA=18181B&colorB=F0DB4F\n[bundle-href]: https://bundlephobia.com/result?p=destr\n[license-src]: https://img.shields.io/github/license/unjs/destr.svg?style=flat&colorA=18181B&colorB=F0DB4F\n[license-href]: https://github.com/unjs/destr/blob/main/LICENSE\n",
    "licenseText": "MIT License\n\nCopyright (c) Pooya Parsa <pooya@pi0.io>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/destr/-/destr-2.0.1.tgz#2fc7bddc256fed1183e03f8d148391dde4023cb2",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/destr/-/destr-2.0.1.tgz",
    "hash": "2fc7bddc256fed1183e03f8d148391dde4023cb2",
    "integrity": "sha512-M1Ob1zPSIvlARiJUkKqvAZ3VAqQY6Jcuth/pBKQ2b1dX/Qx0OnJ8Vux6J2H5PTMQeRzWrrbTu70VxBfv/OPDJA==",
    "registry": "npm",
    "packageName": "destr",
    "cacheIntegrity": "sha512-M1Ob1zPSIvlARiJUkKqvAZ3VAqQY6Jcuth/pBKQ2b1dX/Qx0OnJ8Vux6J2H5PTMQeRzWrrbTu70VxBfv/OPDJA== sha1-L8e93CVv7RGD4D+NFIOR3eQCPLI="
  },
  "registry": "npm",
  "hash": "2fc7bddc256fed1183e03f8d148391dde4023cb2"
}